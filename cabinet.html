{% extends "base.html" %}
{% block content %}

<div class="cabinet-page">
  <h2>{{ cabinet.name }}</h2>
  <p class="status">
    {% if cabinet.active %}
      <span class="status-active">üü¢ –í–∫–ª—é—á—ë–Ω</span>
    {% else %}
      <span class="status-inactive">üî¥ –û—Ç–∫–ª—é—á—ë–Ω</span>
    {% endif %}
  </p>

  <div class="settings-container">
    <h3>Settings</h3>
    <div class="settings-buttons">
      <button class="settings-btn" onclick="toggleCabinet({{ cabinet.id }}, {{ user.telegram_id }})">
        {% if cabinet.active %}–í—ã–∫–ª—é—á–∏—Ç—å –∫–∞–±–∏–Ω–µ—Ç{% else %}–í–∫–ª—é—á–∏—Ç—å –∫–∞–±–∏–Ω–µ—Ç{% endif %}
      </button>
      <button class="settings-btn" onclick="alert('üìã –°–ø–∏—Å–æ–∫ –∫–∞–º–ø–∞–Ω–∏–π –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ')">
        –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∫–∞–º–ø–∞–Ω–∏–π
      </button>
      <button class="settings-btn" onclick="alert('‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏–π –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ')">
        –î–æ–±–∞–≤–∏—Ç—å –∫–∞–º–ø–∞–Ω–∏–∏
      </button>
      <button class="settings-btn" onclick="alert('‚öôÔ∏è –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ')">
        –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä
      </button>
    </div>
  </div>
</div>

<script>
function toggleCabinet(id, uid) {
  fetch(`/dashboard/api/toggle/${id}`, {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({telegram_id: uid})
  })
    .then(r => r.json())
    .then(d => alert(d.message))
    .then(() => location.reload());
}
</script>

{% endblock %}
